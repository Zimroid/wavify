(this.webpackJsonpwavify=this.webpackJsonpwavify||[]).push([[0],[,,,function(t,e,n){t.exports={demoFullSize:"App_demoFullSize__Qo3zK",hideImgTest:"App_hideImgTest__p4AEN",inputTest:"App_inputTest__Drrbd"}},,,,function(t,e,n){t.exports={cellWrapper:"SquareCell_cellWrapper__26luM",cell:"SquareCell_cell__1xXeM"}},function(t,e,n){t.exports={gridContainer:"SquareGrid_gridContainer__1Ll0_",grid:"SquareGrid_grid__2Kdlq"}},,function(t,e,n){t.exports={cell:"Wave_cell__2PRUI"}},,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(9),i=n.n(c),o=(n(16),n(11)),u=n(2),s=(n(17),n(3)),h=n.n(s);function d(t,e){var n=Object(r.useRef)((function(){}));return Object(r.useEffect)((function(){n.current=t})),Object(r.useEffect)((function(){var t=setInterval((function(){n.current()}),e);return function(){return clearInterval(t)}}),[e]),null}var f,l=n(7),g=n.n(l),b=n(1);function j(t){var e=t.x,n=t.y,r=t.children;return Object(b.jsx)("div",{className:g.a.cellWrapper,style:{"--x":e,"--y":n},children:Object(b.jsx)("div",{className:g.a.cell,children:r})})}!function(t){t[t.DISPLAYED=0]="DISPLAYED",t[t.WHITE_LINE=1]="WHITE_LINE",t[t.WHITE_LINE_PREPARATION=2]="WHITE_LINE_PREPARATION"}(f||(f={}));var v=n(10),O=n.n(v);function m(t){var e=t.waveConfig,n=Object(r.useState)(e.color),a=Object(u.a)(n,2),c=a[0],i=a[1],o=Object(r.useRef)(e.nbPeriod),s=Object(r.useRef)(f.DISPLAYED),h=function(t,e){for(var n="M 0 50",r=1;r<=t;r++){var a=100/t*r,c=100/t*(r-1),i=(a-c)/2+c,o=e/100*170,u=50-o,s=50+o;n+=" C ".concat(i," ").concat(u," ").concat(i," ").concat(s," ").concat(a," 50")}return n},d=Object(r.useState)(h(e.nbPeriod,e.intensity)),l=Object(u.a)(d,2),g=l[0],j=l[1],v=Object(r.useCallback)((function(){j(h(o.current,1)),i("#424242")}),[]),m=Object(r.useCallback)((function(){j(h(e.nbPeriod,e.intensity)),i(e.color)}),[e.nbPeriod,e.intensity,e.color]),w=Object(r.useCallback)((function(){j(h(e.nbPeriod,1)),o.current=e.nbPeriod,i("#424242")}),[e.nbPeriod]);return Object(r.useEffect)((function(){if(s.current!==e.phase)switch(s.current=e.phase,s.current){case f.WHITE_LINE:v();break;case f.DISPLAYED:m();break;default:w()}}),[e.phase,v,m,w]),Object(b.jsx)("div",{className:O.a.cell,children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-1 -1 101 101",children:Object(b.jsx)("path",{style:{"--path":"'".concat(g,"'"),"--color":c},strokeWidth:"2",fill:"none",vectorEffect:"non-scaling-stroke",strokeLinecap:"round"})})})}function w(t){var e=t.imageConfig,n=t.intensity,a=t.width,c=t.height,i=Object(r.useState)(-10),o=Object(u.a)(i,2),s=o[0],h=o[1],l=Object(r.useRef)([]),g=Object(r.useState)(e),v=Object(u.a)(g,2),O=v[0],w=v[1],p=Object(r.useRef)(0),I=a>c?a:c;return d((function(){s<=100&&p.current>2&&(l.current=O.listWave.map((function(t,e){var n=t.x/a*100;if(t.y%2===0){if(n<=s)return f.DISPLAYED;if(n<=s+1)return f.WHITE_LINE_PREPARATION;if(n<=s+10)return f.WHITE_LINE}else{if(n>=100-s)return f.DISPLAYED;if(n>=100-(s+1))return f.WHITE_LINE_PREPARATION;if(n>=100-(s+10))return f.WHITE_LINE}return l.current[e]})),h(s+Math.round(I/a)))}),50),Object(r.useEffect)((function(){w((function(t){return t}))}),[s]),Object(r.useEffect)((function(){h(-10),w(e),p.current<3&&(p.current=p.current+1,l.current=e.listWave.map((function(){return f.DISPLAYED})))}),[e]),Object(b.jsx)(b.Fragment,{children:O.listWave.map((function(t,r){var a=Math.round((t.grey-e.darkest)/(e.brightest-e.darkest)*4);return Object(b.jsx)(j,{x:t.x,y:t.y,children:Object(b.jsx)(m,{waveConfig:{nbPeriod:0===a?1:a,intensity:0===a?0:n,color:t.color,phase:l.current[r]}},"wave"+r)},"square"+r)}))})}function p(t,e){for(var n=t;n.length<e;)n="0".concat(n);return n}function I(t,e){return function(t){var e={r:0,g:0,b:0,a:0};t.forEach((function(t){e.r+=t[0],e.g+=t[1],e.b+=t[2],e.a+=t[3]}));var n,r={r:Math.round(e.r/t.length),g:Math.round(e.g/t.length),b:Math.round(e.b/t.length),a:Math.round(e.a/t.length)},a={r:r.r.toString(16),g:r.g.toString(16),b:r.b.toString(16),a:r.a.toString(16)};return{color:(n=a,"#".concat(p(n.r,2)).concat(p(n.g,2)).concat(p(n.b,2)).concat(p(n.a,2))),grey:(r.r+r.g+r.b)/3}}(function(t,e){for(var n=[],r=t.left;r<t.right;r++)for(var a=t.top;a<t.bottom;a++){var c=e.getContext("2d");if(c){var i=c.getImageData(r,a,1,1).data;n.push(i)}}return n}(t,e))}function E(t,e,n){var r=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height,a=200;if(n>a||r>a){var c=n/r;n>r?(n=a,r=a/c):(n=a*c,r=a)}e.width=n,e.height=r;var i=e.getContext("2d");return i&&i.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),e}(t),a=function(t,e,n){var r=t.width,a=t.height,c=0,i=0;if(r>a){var o=r/e;c=e,(i=Math.trunc(a/o))>n&&(c=Math.trunc(r/o),i=n)}else{var u=a/n;i=n,(c=Math.trunc(r/u))>e&&(c=e,i=Math.trunc(a/u))}return{drawedImageWidth:c,drawedImageHeight:i}}(t,e,n),c=function(t,e,n,r,a){for(var c,i,o,u,s=[],h=n.width/t,d=n.height/e,f=255,l=0,g=Math.trunc((a-e)/2),b=Math.trunc((r-t)/2),j=0;j<t;j++)for(var v=0;v<e;v++){var O=I((c=d*v,i=h*j,o=d,u=h,{left:Math.round(i),right:Math.round(i+u-1),top:Math.round(c),bottom:Math.round(c+o-1)}),n),m=O.color,w=O.grey;s.push({x:j+b,y:v+g,color:m,grey:w}),f>w&&(f=w),l<w&&(l=w)}for(var p=0;p<r;p++)for(var E=0;E<g;E++)s.push({x:p,y:E,color:"#424242",grey:f});for(var x=0;x<r;x++)for(var _=g+e;_<a;_++)s.push({x:x,y:_,color:"#424242",grey:f});for(var y=0;y<b;y++)for(var L=g;L<g+e;L++)s.push({x:y,y:L,color:"#424242",grey:f});for(var S=b+t;S<r;S++)for(var P=g;P<g+e;P++)s.push({x:S,y:P,color:"#424242",grey:f});var N=s.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}));return{id:Date.now(),listWave:N,darkest:f,brightest:l}}(a.drawedImageWidth,a.drawedImageHeight,r,e,n);return r.remove(),c}var x=n(8),_=n.n(x);function y(t){var e=t.nbColumns,n=t.nbRows,r=t.children;return Object(b.jsx)("div",{className:_.a.gridContainer,style:{"--nb-columns":e,"--nb-rows":n},children:Object(b.jsx)("div",{className:_.a.grid,children:r})})}function L(){var t=Object(r.useRef)(1),e=Object(r.useRef)(!1),n=Object(r.useState)({id:0,listWave:[],darkest:0,brightest:100}),a=Object(u.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)([]),f=Object(u.a)(s,2),l=f[0],g=f[1],j=Object(r.useState)(0),v=Object(u.a)(j,2),O=v[0],m=v[1],p=function(){var t=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),e=Object(u.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){var t=function(){a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}(),I=p.width,x=p.height,_=Object(r.useState)({width:0,height:0}),L=Object(u.a)(_,2),S=L[0],P=L[1];Object(r.useEffect)((function(){if(I>x){P({width:45,height:Math.round(x/I*45)})}else{P({width:Math.round(I/x*45),height:45})}}),[I,x]);var N=function(t){i(t)};Object(r.useEffect)((function(){l.length>0&&!e.current&&(N(l[0]),e.current=!0)}),[l]);var T=function(t){!function(t){var e=Object(o.a)(l);e.push(t),g(e)}(E(t,S.width,S.height))},W=function(t){T(t.target)},M=function t(){if(l.length>1){var e=(O+1)%l.length;l[O].id!==l[e].id?(m(e),N(l[e])):(m(e),t())}};return d((function(){e&&(0===t.current?M():t.current=t.current-1)}),2e4),Object(b.jsxs)("div",{className:h.a.demoFullSize,children:[Object(b.jsx)("img",{src:"nuit.jpg",onLoad:W,className:h.a.hideImgTest,alt:"test"}),Object(b.jsx)("img",{src:"link.jpg",onLoad:W,className:h.a.hideImgTest,alt:"test"}),Object(b.jsx)("img",{src:"mona.jpg",onLoad:W,className:h.a.hideImgTest,alt:"test"}),Object(b.jsx)("img",{src:"mario.jpg",onLoad:W,className:h.a.hideImgTest,alt:"test"}),Object(b.jsx)(y,{nbColumns:S.width,nbRows:S.height,children:Object(b.jsx)(w,{imageConfig:c,intensity:50,width:S.width,height:S.height})}),Object(b.jsx)("input",{type:"file",id:"imageLoader",name:"imageLoader",className:h.a.inputTest,onChange:function(t){var e=new FileReader;e.onload=function(t){var e=new Image,n=t.target;n&&(e.src="".concat(n.result)),e.onload=function(){T(e)}};var n=t.target.files;n&&e.readAsDataURL(n[0])}})]})}var S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(L,{})}),document.getElementById("root")),S()}],[[19,1,2]]]);
//# sourceMappingURL=main.d27969ac.chunk.js.map